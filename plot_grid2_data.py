import matplotlib.pyplot as plt
from datetime import datetime
import matplotlib.dates as mdates

# Raw data as a multiline string
data = """
2025-05-10T18:15:00Z - 5558 MW
2025-05-10T18:30:00Z - 5535 MW
2025-05-10T18:45:00Z - 5526 MW
2025-05-10T19:00:00Z - 5522 MW
2025-05-10T19:15:00Z - 5522 MW
2025-05-10T19:30:00Z - 5476 MW
2025-05-10T19:45:00Z - 5428 MW
2025-05-10T20:00:00Z - 5426 MW
2025-05-10T20:15:00Z - 5291 MW
2025-05-10T20:30:00Z - 5174 MW
2025-05-10T20:45:00Z - 5058 MW
2025-05-10T21:00:00Z - 4954 MW
2025-05-10T21:15:00Z - 4916 MW
2025-05-10T21:30:00Z - 4912 MW
2025-05-10T21:45:00Z - 4845 MW
2025-05-10T22:00:00Z - 4640 MW
2025-05-10T22:15:00Z - 4618 MW
2025-05-10T22:30:00Z - 4542 MW
2025-05-10T22:45:00Z - 4522 MW
2025-05-10T23:00:00Z - 4397 MW
2025-05-10T23:15:00Z - 4377 MW
2025-05-10T23:30:00Z - 4361 MW
2025-05-10T23:45:00Z - 4295 MW
2025-05-11T00:00:00Z - 4262 MW
2025-05-11T00:15:00Z - 4199 MW
2025-05-11T00:30:00Z - 4199 MW
2025-05-11T00:45:00Z - 4185 MW
2025-05-11T01:00:00Z - 4185 MW
2025-05-11T01:15:00Z - 4185 MW
2025-05-11T01:30:00Z - 4199 MW
2025-05-11T01:45:00Z - 4223 MW
2025-05-11T02:00:00Z - 4224 MW
2025-05-11T02:15:00Z - 4236 MW
2025-05-11T02:30:00Z - 4252 MW
2025-05-11T02:45:00Z - 4308 MW
2025-05-11T03:00:00Z - 4308 MW
2025-05-11T03:15:00Z - 4324 MW
2025-05-11T03:30:00Z - 4327 MW
2025-05-11T03:45:00Z - 4348 MW
2025-05-11T04:00:00Z - 4374 MW
2025-05-11T04:15:00Z - 4396 MW
2025-05-11T04:30:00Z - 4428 MW
2025-05-11T04:45:00Z - 4505 MW
2025-05-11T05:00:00Z - 4628 MW
2025-05-11T05:15:00Z - 4670 MW
2025-05-11T05:30:00Z - 4753 MW
2025-05-11T05:45:00Z - 4759 MW
2025-05-11T06:00:00Z - 4886 MW
2025-05-11T06:15:00Z - 4969 MW
2025-05-11T06:30:00Z - 4974 MW
2025-05-11T06:45:00Z - 4975 MW
2025-05-11T07:00:00Z - 5129 MW
2025-05-11T07:15:00Z - 5202 MW
2025-05-11T07:30:00Z - 5209 MW
2025-05-11T07:45:00Z - 5209 MW
2025-05-11T08:00:00Z - 5209 MW
2025-05-11T08:15:00Z - 5216 MW
2025-05-11T08:30:00Z - 5216 MW
2025-05-11T08:45:00Z - 5216 MW
2025-05-11T09:00:00Z - 5216 MW
2025-05-11T09:15:00Z - 5367 MW
2025-05-11T09:30:00Z - 5397 MW
2025-05-11T09:45:00Z - 5397 MW
2025-05-11T10:00:00Z - 5397 MW
2025-05-11T10:15:00Z - 5397 MW
2025-05-11T10:30:00Z - 5365 MW
2025-05-11T10:45:00Z - 5362 MW
2025-05-11T11:00:00Z - 5335 MW
2025-05-11T11:15:00Z - 5335 MW
2025-05-11T11:30:00Z - 5311 MW
2025-05-11T11:45:00Z - 5248 MW
2025-05-11T12:00:00Z - 5178 MW
2025-05-11T12:15:00Z - 5098 MW
2025-05-11T12:30:00Z - 5054 MW
2025-05-11T12:45:00Z - 5039 MW
2025-05-11T13:00:00Z - 5027 MW
2025-05-11T13:15:00Z - 5027 MW
2025-05-11T13:30:00Z - 5027 MW
2025-05-11T13:45:00Z - 5027 MW
2025-05-11T14:00:00Z - 5027 MW
2025-05-11T14:15:00Z - 5061 MW
2025-05-11T14:30:00Z - 5087 MW
2025-05-11T14:45:00Z - 5190 MW
2025-05-11T15:00:00Z - 5235 MW
2025-05-11T15:15:00Z - 5250 MW
2025-05-11T15:30:00Z - 5277 MW
2025-05-11T15:45:00Z - 5316 MW
2025-05-11T16:00:00Z - 5369 MW
2025-05-11T16:15:00Z - 5374 MW
2025-05-11T16:30:00Z - 5408 MW
2025-05-11T16:45:00Z - 5414 MW
2025-05-11T17:00:00Z - 5423 MW
2025-05-11T17:15:00Z - 5432 MW
2025-05-11T17:30:00Z - 5432 MW
2025-05-11T17:45:00Z - 5432 MW
2025-05-11T18:00:00Z - 5414 MW
"""

# Parse the data
timestamps = []
values = []

for line in data.strip().splitlines():
    try:
        timestamp_str, value_str = line.split(" - ")
        timestamp = datetime.strptime(timestamp_str, "%Y-%m-%dT%H:%M:%SZ")
        value = int(value_str.replace(" MW", ""))
        timestamps.append(timestamp)
        values.append(value)
    except Exception as e:
        print(f"Skipping line due to error: {line}\nError: {e}")

# Plot the data
plt.figure(figsize=(14, 6))
plt.plot(timestamps, values, linestyle='-', marker='', color='tab:blue')

plt.title("Stromlast Ã¼ber Zeit")
plt.xlabel("Zeit")
plt.ylabel("Leistung (MW)")
plt.grid(True)
plt.gca().xaxis.set_major_formatter(mdates.DateFormatter("%m-%d %H:%M"))
plt.xticks(rotation=45)

plt.tight_layout()
plt.savefig("stromlast_plot.png")
plt.show()
